#import "LibC";

struct My_Struct {
    var i: int64;

    func my_cool_func() {
        printf("Hello, World!\n");
    }

    func my_cool_func(my_struct: *My_Struct) {
        printf("Hello, Sailor! %d\n", my_struct.i);
    }

    func my_cool_func(my_struct: My_Struct) {
        printf("Hello, Pilot! %d\n", my_struct.i);
    }

    func func2(my_struct: My_Struct) {
        printf("Goodbye, Moonmen! %d\n", my_struct.i);
    }

    func func3(my_struct: *My_Struct) {
        printf("Shut up, Morty! %d\n", my_struct.i);
    }
}

union My_Union {
    var x: float;
    var s: string;
    var i: int32;
}


func main() {
    var whatever: My_Struct;
    var whatever_ptr = *whatever;
    whatever.i = 10;

    // Pilot
    whatever.my_cool_func();
    // World
    My_Struct.my_cool_func();
    // Morty
    whatever.func3();
    // Sailor
    My_Struct.my_cool_func(*whatever);

    // Sailor
    whatever_ptr.my_cool_func();
    // Moonmen
    whatever_ptr.func2();

    var union_test: My_Union;
    var union_test_ptr = *union_test;
    var f: float = 123.0;
    union_test_ptr.i = <<cast(*int32) *f;
    printf("union_test.x: %f, union_test.i: %d\n", union_test.x, union_test.i);
}


